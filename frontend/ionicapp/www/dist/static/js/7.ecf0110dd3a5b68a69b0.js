webpackJsonp([7],{1422:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Row",{attrs:{justify:"space-between"}},[n("Col",{staticClass:"department_title",attrs:{span:"24"}},[n("Icon",{staticStyle:{"margin-left":"20px"},attrs:{type:"card"}}),t._v("\n\t后台 > 人员管理\n\n\t")],1),t._v(" "),n("Row",[n("Col",{staticClass:"position_two_title",attrs:{span:"12"}},[n("span",{staticStyle:{"margin-left":"83px"}},[t._v("岗位类别")]),t._v(" "),n("Select",{staticStyle:{width:"200px"}})],1),t._v(" "),n("Col",{staticClass:"position_two_title",attrs:{span:"12"}},[n("span",[t._v("岗位名称")]),t._v(" "),n("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入..."}})],1)],1),t._v(" "),n("Col",{attrs:{span:"24"}},[n("Button",{staticClass:"add_button",attrs:{type:"primary"},on:{click:t.creatprofile}},[t._v("新建")])],1),t._v(" "),n("Col",{staticClass:"department_tree",attrs:{span:"6"}},[n("Tree",{staticClass:"department_tree_content",attrs:{data:t.baseData}})],1),t._v(" "),n("Col",{staticClass:"department_tree",attrs:{span:"16",offset:"1"}},[n("Table",{staticClass:"position_showList",attrs:{columns:t.position_columns1,data:t.position_data1}})],1)],1)},staticRenderFns:[]}},20:function(t,e,n){n(981);var a=n(1)(n(588),n(1422),null,null);t.exports=a.exports},588:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=[];e.default={data:function(){var t=this;return{showcom:!1,modal1:!1,modal2:!1,baseData:[{expand:!0,title:"",children:[{title:"",expand:!0},{title:"",expand:!0}]}],departmentSuperiorList:[{parentId:"",departmentName:"无"}],position_columns1:[{type:"selection",width:60,align:"center"},{title:"姓名",key:"personName"},{title:"登录名",key:"loginName"},{title:"所属部门",key:"departmentName"},{title:"岗位",key:"jobpositionName"},{title:"人员状态",key:"personStatus"},{title:"操作",key:"position_action",render:function(e,n){return e("div",[e("Button",{props:{type:"text",size:"small"},on:{click:function(){t.editPerson(n.index)}}},"编辑"),e("Button",{props:{type:"text",size:"small"},on:{click:function(){t.removePerson(n.index)}}},"删除")])}}],position_data1:[],formItem:{departmentName:"",departmentCode:"",departmentSuperior:"",departmentDirector:"",departmentDesc:""},formItem1:{departmentName:"",departmentCode:"",departmentSuperior:"",departmentDesc:""}}},methods:{handlequery:function(){var t=this;this.$http.get(this.globalconfig.listdepartmentapi,{params:{}},{emulateJSON:!0}).then(function(e){if(e.body.error)t.$Message.error(e.body.error);else{t.$Message.success("成功");for(var n=e.data.department,i=n.length,o=0;o<i;o++)a.push(n[o]);t.$http.get(t.globalconfig.listpersonapi,{params:{userStatus:1}},{emulateJSON:!0}).then(function(e){if(e.body.error)t.$Message.error(e.body.error);else{t.$Message.success("成功");for(var n=e.data.person,i=[],o=0;o<n.length;o++)i.push(n[o]);t.$http.get(t.globalconfig.listjobpositionapi,{params:{}},{emulateJSON:!0}).then(function(e){if(e.body.error)t.$Message.error(e.body.error);else{t.$Message.success("成功");for(var n=e.data.jobposition,o=[],s=0;s<n.length;s++)o.push(e.data.jobposition[s]);for(var r=0;r<i.length;r++)for(var p=0;p<a.length;p++)i[r].departmentId==a[p].id&&(i[r].departmentName=a[p].departmentName);for(var d=0;d<i.length;d++)for(var l=0;l<o.length;l++)i[d].positionId==o[l].id&&(i[d].jobpositionName=o[l].jobpositionName);t.position_data1=i;var c=function(t){for(var e={},n=[],a=0;0!=t.length;){if(""==t[a].parentId||null==t[a].parentId||0==t[a].parentId)n.push({id:t[a].id,title:t[a].departmentName,departmentCode:t[a].departmentCode,departmentDesc:t[a].departmentDesc,parentId:t[a].parentId,ownerId:t[a].ownerId,parentName:t[a].parentName,ownerName:t[a].ownerName,checked:!0,children:[]}),e[t[a].id]=[n.length-1],t.splice(a,1),a--;else{var i=e[t[a].parentId];if(void 0!=i){for(var o=n[i[0]],s=1;s<i.length;s++)o=o.children[i[s]];o.children.push({id:t[a].id,title:t[a].departmentName,departmentCode:t[a].departmentCode,departmentDesc:t[a].departmentDesc,parentId:t[a].parentId,ownerId:t[a].ownerId,ownerName:t[a].ownerName,parentName:t[a].parentName,children:[]}),e[t[a].id]=i.concat([o.children.length-1]),t.splice(a,1),a--}}a++,a>t.length-1&&(a=0)}return n}(a);t.baseData=c}},function(e){t.$Message.success("成功")})}},function(e){t.$Message.success("成功")})}},function(e){t.$Message.success("成功")})},creatprofile:function(){this.$router.push("./personprofile")},ok:function(){this.$Message.info("点击了确定")},cancel:function(){this.$Message.info("点击了取消")},showPersonSelect:function(){this.showcom=!this.showcom},editPerson:function(t){this.$router.push({path:"./personedit",query:{id:this.position_data1[t].id,defaultpassword:this.position_data1[t].defaultpassword,departmentId:this.position_data1[t].departmentId,email:this.position_data1[t].email,inductionTime:this.position_data1[t].inductionTime,loginName:this.position_data1[t].loginName,officePhone:this.position_data1[t].officePhone,personBirthday:this.position_data1[t].personBirthday,personDesc:this.position_data1[t].personDesc,personName:this.position_data1[t].personName,personStatus:this.position_data1[t].personStatus,personType:this.position_data1[t].personType,positionId:this.position_data1[t].positionId,sex:this.position_data1[t].sex,telPhone:this.position_data1[t].telPhone,userStatus:this.position_data1[t].userStatus,workPlace:this.position_data1[t].workPlace}})},removePerson:function(t){var e=this,n=this.position_data1[t].id;this.$http.get(this.globalconfig.deletepersonapi,{params:{id:n}},{emulateJSON:!0}).then(function(t){t.body.error?e.$Message.error(t.body.error):(e.$Message.success("成功"),document.location.reload())},function(t){e.$Message.success("成功")})}},mounted:function(){this.handlequery()}}},615:function(t,e,n){e=t.exports=n(16)(),e.push([t.i,".department_title{background:#e6e9ed;height:30px;line-height:30px}.add_button{width:8%;margin-top:10px;margin-bottom:10px}.department_tree{background:#fff;min-height:600px}.department_tree_content{padding:20px 0 0 20px}.department_department_name{text-align:center}.department_department_content,.department_department_name{height:50px;line-height:50px}.department_EditInfo{text-align:right}.department_Dialog{margin-top:10px}.position_two_title{margin-top:10px;height:63px;background:#fff;line-height:63px}.position_two_title span{margin-right:20px}.position_showList span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}","",{version:3,sources:["E:/bpmwww/frontend/framework/src/pages/framework/person.vue"],names:[],mappings:"AACA,kBACC,mBAAoB,AACpB,YAAa,AACb,gBAAkB,CAClB,AACD,YACC,SAAU,AACV,gBAAiB,AACjB,kBAAoB,CACpB,AACD,iBACC,gBAAkB,AAClB,gBAAkB,CAClB,AACD,yBAEC,qBAAuB,CACvB,AACD,4BACC,iBAAmB,CAGnB,AACD,2DAHC,YAAa,AACb,gBAAkB,CAKlB,AACD,qBACC,gBAAkB,CAClB,AACD,mBACC,eAAiB,CACjB,AACD,oBACC,gBAAiB,AACjB,YAAa,AACb,gBAAkB,AAClB,gBAAkB,CAClB,AACD,yBACC,iBAAmB,CACnB,AACD,wBACC,gBAAiB,AACjB,uBAAwB,AACxB,kBAAoB,CACpB",file:"person.vue",sourcesContent:["\n.department_title {\n\tbackground: #e6e9ed;\n\theight: 30px;\n\tline-height: 30px;\n}\n.add_button {\n\twidth: 8%;\n\tmargin-top: 10px;\n\tmargin-bottom: 10px;\n}\n.department_tree {\n\tbackground: white;\n\tmin-height: 600px;\n}\n.department_tree_content {\n\t/*text-align: center;*/\n\tpadding: 20px 0 0 20px;\n}\n.department_department_name {\n\ttext-align: center;\n\theight: 50px;\n\tline-height: 50px;\n}\n.department_department_content {\n\theight: 50px;\n\tline-height: 50px;\n}\n.department_EditInfo {\n\ttext-align: right;\n}\n.department_Dialog {\n\tmargin-top: 10px;\n}\n.position_two_title {\n\tmargin-top: 10px;\n\theight: 63px;\n\tbackground: white;\n\tline-height: 63px;\n}\n.position_two_title span {\n\tmargin-right: 20px;\n}\n.position_showList span {\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n}\n"],sourceRoot:""}])},981:function(t,e,n){var a=n(615);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(17)("901b2766",a,!0)}});